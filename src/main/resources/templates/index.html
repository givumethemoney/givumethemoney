<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>GIVU ME THE MONEY</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>

    <link rel="stylesheet" href="/css/main.css" />
    <link rel="stylesheet" href="/css/home.css"/>
    <link rel="stylesheet" href="/css/header.css" />
    <link rel="stylesheet" href="/css/chatbot.css" />

</head>
<body class="homepage is-preload">
<div id="page-wrapper">
    <!--  header-->
    <div th:replace="~{layouts/header::header}"></div>

    <div class="content-wrapper">
        <!-- Slider -->
        <div id="body-wrapper">
            <div class="slider">
                <div class="slides">
                    <a href="https://link1.com" class="slide">
                        <img src="https://gmtm-receipt-bucket.s3.ap-northeast-2.amazonaws.com/IMG_3350.JPG"
                             alt="Image 1">

                    </a>
                </div>
            </div>
            <!-- 진행 중인 GIVU -->
            <div class="givuing">
                <a class="givu-title" href="/donationList">
                    <h1>진행중인 GIVU ❯</h1>
                </a>
                <div th:each="donation : ${ongoingDonations}" class="donation-card">
                    <div class="donation-card-inner">
                        <div class="thumbnail-placeholder"></div>
                        <div class="donation-content">
                            <div class="donation-info">
                                <h3 th:text="${donation.title}"></h3>
                                <p th:text="'후원기업: ' + ${donation.enterName}"></p>
                            </div>
                            <div class="donation-date">
                                <p th:text="'시작일: ' + ${donation.startDate}"></p>
                                <p th:text="'마감일: ' + ${donation.endDate}"></p>
                            </div>
                            <div class="donation-price">
                                <p th:text="'목표 금액: ' + ${donation.getGoal()}"></p>
                                <p th:text="'모금된 금액: ' + ${donation.getCurrentAmount()}"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            </div>

            <!-- 전해진 GIVU -->
            <div class="ending">
                <a class="givu-title" href="/donationList">
                    <h1>전해진 GIVU ❯</h1>
                </a>
                <div th:each="donation : ${finishedDonations}" class="donation-card">
                    <div class="donation-card-inner">
                        <div class="thumbnail-placeholder"></div>
                        <div class="donation-content">
                            <div class="donation-info">
                                <h3 th:text="${donation.title}"></h3>
                                <p th:text="'후원기업: ' + ${donation.enterName}"></p>
                            </div>
                            <div class="donation-date">
                                <p th:text="'시작일: ' + ${donation.startDate}"></p>
                                <p th:text="'마감일: ' + ${donation.endDate}"></p>
                            </div>
                            <div class="donation-price">
                                <p th:text="'목표 금액: ' + ${donation.getGoal()}"></p>
                                <p th:text="'모금된 금액: ' + ${donation.getCurrentAmount()}"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- 진행률 표시 -->
    <!-- 남은 일수 표시 -->
    <!-- 목표 금액 -->


    
    <!--    footer-->
    <header th:replace="layouts/footer::footer"></header>

    <!--navigation bar-->
    <!-- <div th:replace="~{navBar :: navBar}"></div> -->
    <div th:insert="~{chatbot :: chatbot}"></div>


<!--navigation bar-->
<!-- <div th:replace="~{navBar :: navBar}"></div> -->

<!-- Scripts -->
<script type="text/javascript" th:src="@{/js/breakpoints.min.js}"></script>
<script type="text/javascript" th:src="@{/js/browser.min.js}"></script>
<script type="text/javascript" th:src="@{/js/jquery.dropotron.min.js}"></script>
<script type="text/javascript" th:src="@{/js/jquery.min.js}"></script>
<script type="text/javascript" th:src="@{/js/home.js}"></script>
<script type="text/javascript" th:src="@{/js/util.js}"></script>
<script>
    function sendQuestion() {
                var question = document.getElementById("userQuestion").value;
                fetch("/chatbot/ask", {
                    method: "POST",
                    body: JSON.stringify({ question: question }),
                    headers: {
                        "Content-Type": "application/json"
                    }
                })
                .then(response => response.json())
                .then(data => {
                    var messages = document.getElementById("messages");
                    messages.innerHTML += "<div class='question'>Q: " + question + "</div>";
                    messages.innerHTML += "<div class='answer'>A: " + data.answer + "</div>";
                });
            }

    function toggleChat() {
        const chatPopup = document.getElementById("chat-popup");
        if (chatPopup.style.display === "none" || chatPopup.style.display === "") {
            chatPopup.style.display = "flex"; // 보이기
        } else {
            chatPopup.style.display = "none"; // 숨기기
        }
    }
</script>

</body>
</html>
