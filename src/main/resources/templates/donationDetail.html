<!DOCTYPE HTML>
<!--
	Telephasic by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <title>Givu Me The Money</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="/css/main.css" />
    <link href="https://hangeul.pstatic.net/hangeul_static/css/nanum-square-round.css" rel="stylesheet">
</head>
<body class="homepage is-preload">
<div id="page-wrapper">

    <div th:replace="layouts/header::header"></div>

    <div class="content-wrapper">
        <a href="#" class="button">목록</a>
        <!-- 사용자 테이블 추가되면 admin인지 확인
        <th:block th:if="${donation.isConfirmed()}">-->
        <th:block>
            <br>
        <hr>
            <br>
            <p id="donation-title" th:text="${donation.getTitle()}"></p>
            <hr>
            <table>
                <tbody>
                <tr>
                    <th>시작 날짜</th>
                    <td th:text="${donation.getStartDate()}"></td>
                </tr>
                <tr>
                    <th>종료 날짜</th>
                    <td th:text="${donation.getEndDate()}"></td>
                </tr>
                <tr>
                    <th>기업 이름</th>
                    <td th:text="${donation.getEnterName()}"></td>
                </tr>
                <tr>
                    <th>목표 금액</th>
                    <td class="money" th:text="${donation.getGoal()}"></td>
                </tr>
                <tr>
                    <th>현재 금액</th>
                    <td class="money" th:text="${donation.getCurrentAmount()}"></td>
                </tr>
                <tr>
                    <th class="last">참여자 수</th>
                    <td class="last" th:text="${donation.getParticipant()}"></td>
                </tr>
                </tbody>
            </table>
            <hr>
            <table id="product-list">
                <tbody>
                <tr>
                    <th>기부 품목 목록</th>
                </tr>
                <tr th:each="p : ${productList}">
                    <td th:text="${p.getProductName()}"></td>
                </tr>
                </tbody>
            </table>

            <p id="current-percent">현재 모금 진행률</p>
            <p class="amount money" th:text="${donation.getCurrentAmount()}"></p>
            <p class="amount"> / </p>
            <p class="amount money" th:text="${donation.getGoal()}"></p>
            <p class="amount"> 원</p>
            <progress class="progress" id="progress" th:value="${donation.getCurrentAmount()}" min="0" th:max="${donation.getGoal()}"></progress>
            <hr>
            <table>
                <tbody>
                <tr th:each="i : ${images}">
                    <th hidden="hidden">이미지</th>
                    <td><img th:src="|/images/${i.getId()}|"/></td>
                </tr>
                <tr>
                    <th hidden="hidden">설명</th>
                    <td th:text="${donation.getDescription()}"></td>
                </tr>
                <!-- 추가 행은 여기서부터 작성 -->
                </tbody>
            </table>
        </th:block>
    </div>
    <!-- 사용자 테이블 추가 후 admin인지 확인되면
    승인 버튼 추가
    <th:block th:if="${!user.isAdmin() && !donation.isConfirmed()}">
        <button class="button" th:href="@{/application/confirm/{id}(id = ${donation.getId()})}">신청</button>
    </th:block>
    -->
    <th:block th:if="${!donation.isConfirmed()}">
        <a class="button" th:href="@{/application/confirm/{id}(id = ${donation.getId()})}">신청</a>
    </th:block>

    <header th:replace="layouts/footer::footer"></header>
    </div>

    <!-- Scripts -->
    <script type="text/javascript" th:src="@{/js/jquery.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/jquery.dropotron.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/browser.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/breakpoints.min.js}"></script>
    <script type="text/javascript" th:src="@{/js/util.js}"></script>
    <script type="text/javascript" th:src="@{/js/main.js}"></script>
<script>
    window.onload = function() {
        var money = document.getElementsByClassName('money');

        for (var i = 0; i < money.length; i++) {
            var m = money.item(i);
            var text = m.innerText;
            var localeString = Number(text).toLocaleString('ko-kr');
            console.log(localeString);
            m.innerText = localeString;
        }
    }
</script>
</body>
</html>