<!DOCTYPE HTML>
<!--
	Telephasic by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
  <title>Givu Me The Money</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
  <link rel="stylesheet" href="/css/main.css" />
  <link rel="stylesheet" href="/css/applicationAgree.css" />
</head>
<body class="homepage is-preload">
<div id="page-wrapper">

  <div th:replace="~{layouts/header::header}"></div>
  <div class="content-wrapper">
    <form id="application-agree-form" method="GET" action="/application/write">
      <div class="form-content">
        <div class="form-section">
          <div class="check_wrap">
            <input type="checkbox" id="chk-all" name="chk-all"/>
            <label for="chk-all">
              <span class="check-all">전체 동의하기</span>
            </label>
          </div>
          <ul class="terms-list">
            <li class="terms-item">
              <div class="check-terms">
                <div class="check-wrap">
                  <input type="checkbox" id="term-service" />
                  <label for="term-service">
                    <em class="option point">[필수]</em>
                    <div class="text-wrap">
                      <span class="text">기부 이행 약관</span>
                      <a href="">전체</a>
                    </div>
                  </label>
                </div>
              </div>
              <div class="terms-box">
                <div class="article">
                  <p class="article-text">
                    <!-- 약관 내용-->
                  </p>
                </div>
              </div>
            </li>
            <li class="terms-item">
              <div class="check-terms">
                <div class="check-wrap">
                  <input type="checkbox" id="term-business" />
                  <label for="term-business">
                    <em class="option point">[필수]</em>
                    <div class="text-wrap">
                      <span class="text">기부 이행 약관</span>
                      <a href="">전체</a>
                    </div>
                  </label>
                </div>
              </div>
              <div class="terms-box">
                <div class="article">
                  <p class="article-text">
                    <!-- 약관 내용-->
                  </p>
                </div>
              </div>
            </li>
          </ul>
        </div>
      </div>
      <div class="btn-submit-wrap">
        <button type="button" id="btn-agree" class="button" disabled>다음</button>
      </div>
    </form>
  </div>
  <header th:replace="~{layouts/footer::footer}"></header>
</div>

<!-- Scripts -->
<script type="text/javascript" th:src="@{/js/jquery.min.js}"></script>
<script type="text/javascript" th:src="@{/js/jquery.dropotron.min.js}"></script>
<script type="text/javascript" th:src="@{/js/browser.min.js}"></script>
<script type="text/javascript" th:src="@{/js/breakpoints.min.js}"></script>
<script type="text/javascript" th:src="@{/js/util.js}"></script>
<script type="text/javascript" th:src="@{/js/main.js}"></script>
<script type="text/javascript">
  $(document).ready(function() {
    $(window).on("pageshow", function () {
      $("#chk-all").prop("checked",false);
      setTerms();
    });

    $("#chk-all").prop("checked",false);
    setTerms();

    $("#chk-all").click(function() {
      setTerms();
    })

    $("#term-service").click(function() {
      viewTerms();
    })

    $("#term-business").click(function() {
      viewTerms();
    })

    $("#btn-agree").click(function(event) {
      submitAgree();
      return false;
    })

  });

  function setTerms() {
    if ($("#chk-all").is(":checked")) {
      $("#term-service").prop("checked",true);
      $("#term-business").prop("checked",true);
    } else {
      $("#term-service").prop("checked",false);
      $("#term-business").prop("checked",false);
    }
    checkTerms();
    return true;
  }
  function viewTerms() {

    if( !$("#term-service").is(":checked") || !$("#term-business").is(":checked")
            // 추가 가능
    ) {
      $("#chk-all").prop("checked",false);
    }

    if( $("#term-service").is(":checked") && $("#term-business").is(":checked")
            // 추가 가능
    ) {
      $("#chk-all").prop("checked",true);
    }

    checkTerms();
    return true;
  }

  function checkTerms() {
    let res = true;

    if ($("#term-service").is(":checked") == false || $("#term-business").is(":checked") == false) {
      $("#btn-agree").prop("disabled", true);
      res = false;
    } else {
      $("#btn-agree").prop("disabled", false);
    }

    return res;
  }

  function submitAgree() {
    if (checkTerms() != true) {
      return false;
    }

    $("#application-agree-form").submit();
    return true;
  }

</script>
</body>
</html>